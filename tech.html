<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>DryerDudes Tech</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 720px; margin: 40px auto; padding: 0 16px; }
    .top { display:flex; justify-content:space-between; align-items:center; gap:12px; }
    button { padding: 10px 14px; cursor:pointer; }
    pre { background:#f6f6f6; padding:12px; overflow:auto; }
    .msg { margin-top: 12px; color:#b00020; }
  </style>
</head>
<body>
  <div class="top">
    <h2>Tech Dashboard</h2>
    <button id="logoutBtn">Log out</button>
  </div>

  <p>This is a placeholder tech page. If you can see this, routing + auth works.</p>

  <h3>Session</h3>
  <pre id="sessionBox">Loadingâ€¦</pre>

  <div class="msg" id="msg"></div>

  <script>
    const SUPABASE_URL = "https://amuprwbuhcupxfklmyzn.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFtdXByd2J1aGN1cHhma2xteXpuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkyNzMzMTksImV4cCI6MjA4NDg0OTMxOX0.qop2LBQQ8z-iFhTWyj4dA-pIURfBCx6OtEmEfHYWAgY";

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    const msg = document.getElementById("msg");
    const sessionBox = document.getElementById("sessionBox");

    async function requireLogin() {
      const { data: { session } } = await supabase.auth.getSession();
      if (!session) {
        window.location.href = "/login.html";
        return;
      }
      sessionBox.textContent = JSON.stringify({
        user: { id: session.user.id, email: session.user.email },
        expires_at: session.expires_at
      }, null, 2);
    }

    document.getElementById("logoutBtn").addEventListener("click", async () => {
      msg.textContent = "";
      await supabase.auth.signOut();
      window.location.href = "/login.html";
    });

    requireLogin();
  </script>
</body>
</html>
